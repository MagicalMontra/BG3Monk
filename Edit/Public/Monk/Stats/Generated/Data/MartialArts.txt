new entry "MartialArts"
type "PassiveData"
data "DisplayName" "Martial Arts"
data "Description" "Use your Dexterity instead of Strength , whichever is higher, for unarmed attacks and attacks with Monk Weapons."
data "Icon" "Icon_Monk_Strike"

new entry "MARTS_DEX"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Martial Arts"
data "Description" "You are using your Dexterity Modifier for your unarmed attacks"
data "Icon" "Action_UnarmedAttack"
data "StackId" "MADEXTERITY"
data "StackPriority" "0"
data "Boosts" "UnlockSpell(Target_MartialArts,,,,Dexterity);UnlockSpell(Target_MartialArts_BonusAttack,,,,Dexterity)"
data "StatusPropertyFlags" "DisableOverhead;ApplyToDead;IgnoreResting"
data "OnApplyFunctors" "RemoveStatus(SELF,MARTS_STR)"

new entry "MARTS_STR"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Martial Arts"
data "Description" "You are using your Strength Modifier for your unarmed attacks"
data "Icon" "Action_UnarmedAttack"
data "StackId" "MASTRENGTH"
data "StackPriority" "0"
data "Boosts" "UnlockSpell(Target_MartialArts,,,,Strength);UnlockSpell(Target_MartialArts_BonusAttack,,,,Strength)"
data "StatusPropertyFlags" "DisableOverhead;ApplyToDead;IgnoreResting"
data "OnApplyFunctors" "RemoveStatus(SELF,MARTS_DEX)"

new entry "Target_MartialArts"
type "SpellData"
data "SpellType" "Target"
data "Level" "1"
data "TargetCeiling" "0"
data "TargetFloor" ".25"
data "TargetRadius" "1.5"
data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d4+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(6)):DealDamage(1d6+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(6) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(10)):DealDamage(1d6+DexterityModifier,Force);IF(CharacterLevelGreaterThan(10) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(16)):DealDamage(1d8+DexterityModifier,Force);IF(CharacterLevelGreaterThan(16) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d10+DexterityModifier,Force);IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d4+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(6) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThan(10)):DealDamage(1d6+StrengthModifier,Force);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThanLessThan(10)):DealDamage(1d6+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(10) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThan(16)):DealDamage(1d8+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(16) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d10+StrengthModifier,Bludgeoning)"
data "TargetConditions" "not Self() and not Dead()"
data "Icon" "Icon_Monk_Strike"
data "DisplayName" "Monk Unarmed Strike"
data "Description" "Your unarmed strikes use the the higher of your Dexterity modifier or Strength modifier, at higher levels the damage die increases"
data "DescriptionParams" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "TooltipDamageList" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "ExtraDescription" "Martial Arts die increases to d6 at level 5, d8 at level 11 and d10 at level 17"
data "TooltipAttackSave" "MeleeSpellAttack"
data "PreviewCursor" "Melee"
data "CastTextEvent" "Cast"
data "CastSound" "Action_Cast_Bash"
data "TargetSound" "Action_Impact_Bash"
data "CycleConditions" "Character() and not Dead()"
data "UseCosts" "ActionPoint:1"
data "SpellAnimation" "8b8bb757-21ce-4e02-a2f3-97d55cf2f90b(CMBT_Melee_RHand_01_Prepare),,;6606c30b-be1c-4f17-ae6b-1a591c80b18c(CMBT_Melee_RHand_01_Antic),366693ee-d97f-4294-a4dd-a2145ddc4e6a(CMBT_Melee_RHand_01_Antic_LOW),9f2d32b9-529a-4b75-b3df-6e1ae1395280(CMBT_Melee_RHand_01_Antic_HIGH);f4ac302b-1569-404f-bd52-1fe443e265df(CMBT_Melee_RHand_01_Attack),479ee5da-2967-41e1-b7d1-a94e864a5f25(CMBT_Melee_RHand_01_Attack_LOW),79323098-edb3-4993-ba50-9b5f705e9878(CMBT_Melee_RHand_01_Attack_HIGH);e8a5c57f-855b-4227-acaa-11e8ce8d7d64(CMBT_Melee_RHand_01_Recover),b5cb923d-0c08-4c20-89a9-44b9bf98c6cb(CMBT_Melee_RHand_01_Recover_LOW),6282d127-0c06-4365-9d53-6f32ef350127(CMBT_Melee_RHand_01_Recover_HIGH);7bb52cd4-0b1c-4926-9165-fa92b75876a3(CMBT_Melee_RHand_01_Loop),,;2b81c18b-9698-4262-a623-932c2bb1296d(CMBT_Melee_RHand_01_Dash),ecbf9949-3b33-432c-b735-e47aaed0924a(CMBT_Melee_RHand_01_Dash_LOW),e71a7c08-fdc1-4a0b-9a90-1c793c58553c(CMBT_Melee_RHand_01_Dash_HIGH)"
data "SpellFlags" "IsAttack;IsMelee;IsHarmful;DontForceSheathOrUnsheath;IgnoreSilence"
data "HitAnimationType" "PhysicalDamage"
data "SpellAnimationIntentType" "Aggressive"

//Original data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d4+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + DexterityModifier, Bludgeoning);IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d4+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + StrengthModifier, Bludgeoning)"


new entry "Target_MartialArts_BonusAttack"
type "SpellData"
data "SpellType" "Target"
using "Target_MartialArts"
data "Icon" "Icon_Monk_Strike"
data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
data "SpellProperties" "RemoveStatus(SELF,HEALINGFLURRY)"
data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d4+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(6)):DealDamage(1d6+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(6) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(10)):DealDamage(1d6+DexterityModifier,Force);IF(CharacterLevelGreaterThan(10) and HasStatus('MARTS_DEX',context.Source) and not CharacterLevelGreaterThan(16)):DealDamage(1d8+DexterityModifier,Force);IF(CharacterLevelGreaterThan(16) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d10+DexterityModifier,Force);IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d4+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(6) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThan(10)):DealDamage(1d6+StrengthModifier,Force);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThanLessThan(10)):DealDamage(1d6+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(10) and HasStatus('MARTS_STR',context.Source) and not CharacterLevelGreaterThan(16)):DealDamage(1d8+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(16) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d10+StrengthModifier,Bludgeoning)"
data "DisplayName" "Bonus Unarmed Strike"
data "Description" "Strike a target with an unarmed attack dealing damage equal to a roll of your Martial Arts Die plus your dexterity modifier."
data "DescriptionParams" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "TooltipDamageList" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "ExtraDescription" "Martial Arts die increases to d6 at level 5, d8 at level 11 and d10 at level 17"
data "TooltipAttackSave" "MeleeWeaponAttack"
data "UseCosts" "BonusActionPoint:1;KiPoint:1"
data "SpellFlags" "IsMelee;IsHarmful"

// Original  data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d4+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + DexterityModifier, Bludgeoning);IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d4+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + StrengthModifier, Bludgeoning)"  //
new entry "DrunkenTechnique"
type "PassiveData"
data "DisplayName" "Drunken Technique"
data "Description" "Whenever you use Flurry of Blows, you gain the benefit of the Disengage action, and your walking speed increases by 10 feet until the end of the current turn."
data "Icon" "Status_Drunk"
data "Conditions" "SpellId('Target_Flurry_Strike')"
data "StatsFunctors" "ApplyStatus(SELF,QUICKSTEP,100,1)"
data "StatsFunctorContext" "OnAttack"




// Original
//new entry "DrunkenTechnique"
//type "PassiveData"
//data "DisplayName" "Drunken Technique"
//data "Description" "Whenever you use Flurry of Blows, you gain the benefit of the Disengage action, and your walking speed increases by 10 feet until the end of the current turn."
//data "Icon" "Status_Drunk"
//data "StatsFunctors" "IF(IsFlurry()):ApplyStatus(SELF,QUICKSTEP,100,1)"
//data "StatsFunctorContext" "OnAttack"

new entry "QUICKSTEP"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Quick Step"
data "Description" "Your speed is increased by 10ft and your movement doesn't provoke attacks of opportunity"
data "Icon" "Action_Dash"
data "StackId" "QUICKSTEP"
data "Boosts" "ActionResource(Movement,3,0);IgnoreLeaveAttackRange"

new entry "DrunkM"
type "PassiveData"
data "DisplayName" "Drunk"
data "Description" "you are pretending to be drunk"
data "Icon" "Status_Drunk"
data "Properties" "IsToggled;ToggledDefaultON"
data "ToggleOnFunctors" "ApplyStatus(DRUNKMASTER,100,-1)
data "ToggleOffFunctors" "RemoveStatus(DRUNKMASTER)"

new entry "DRUNKMASTER"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Drunken Master"
data "Description" "You appear to be drunk"
data "Icon" "Status_Drunk"
data "FormatColor" "White"
data "StillAnimationType" "Dazed"
data "StillAnimationPriority" "Dazed"
data "SoundVocalStart" "WEAK"
data "SoundLoop" "Misc_Status_Drunk_MO"
data "SoundStop" "Misc_Status_Drunk_MO_Stop"
data "StackId" "DRUNKMASTER"
data "Boosts" "Proficiency(Skill,Performance)"
data "StatusPropertyFlags" "DisableCombatlog;DisablePortraitIndicator;DisableOverhead;ApplyToDead;IgnoreResting"
data "StatusEffect" "79eb91f2-1a1f-4749-87e3-a0cafc1f4ef6"

new entry "TipsySway"
type "PassiveData"
data "DisplayName" "Tipsy Sway"
data "Icon" "Icon_TipsySway"
data "Description" "When you are prone standing up only uses 5ft of your movement, and when you are missed by a melee attack you can use your reaction and spend a Ki Point to have that attack hit another target in melee range.
data "Conditions" "IsMeleeAttack() and IsMiss() and HasActionResource('ReactionActionPoint',1,0,false) and not (not Player() and Tagged('AI_IGNORED_TARGET',context.Source)) and not HasStatus('INVISIBILITY')"
data "StatsFunctors" "ApplyStatus(SWAP,TIPSY_SWAY1,100,-1);UseActionResource(SELF,ReactionActionPoint,1);UseActionResource(SELF,KiPoint,1)"
data "StatsFunctorContext" "OnAttacked"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar"

new entry "TIPSY_SWAY1"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Icon_TipsySway"
data "DisplayName" "Redirect Attack"
data "Description" "The monk is redirecting your attack"
data "Boosts" "FactionOverride(Source); BlockSpellCast(); ActionResourceBlock(ActionPoint); ActionResourceBlock(BonusActionPoint); ActionResource(ExtraActionPoint,1,0);BlockTravel"
data "StatusPropertyFlags" "CharacterControl"
data "RemoveEvents" "OnAttack"

new entry "DrunkardsLuck"
type "PassiveData"
data "DisplayName" "Drunkard's Luck"
data "Description" "When you make an attack roll, savingthrow, or skill check and have disadvantage you can spend 2 ki points to cancel that disadvantage"
data "Icon" "Skill_Sorcerer_Passive_BendLuck"
data "Boosts" "UnlockSpell(Target_DrunkardsLuck)"

new entry "Target_DrunkardsLuck"
type "SpellData"
data "SpellType" "Target"
data "Level" "0"
data "SpellSchool" "Divination"
data "SpellProperties" "ApplyStatus(DRUNKLUCK, 100, 1)"
data "TargetRadius" "Self()"
data "TargetConditions" "Self()"
data "Icon" "Skill_Sorcerer_Passive_BendLuck"
data "DisplayName" "Drunkard's Luck"
data "Description" "Give yourself Advantage on your next Attack Roll, Saving Throw, or Skill Check"
data "TooltipStatusApply" "ApplyStatus(DRUNKLUCK, 100, 1)"
data "PreviewCursor" "Cast"
data "CastSelfAnimation" "8252328a-66dd-4dc0-bbe0-00eea3204922(SPL_Somatic_Circle_1HandCCW_01_Cast)"
data "CastTextEvent" "Cast"
data "CastSound" "Spell_Cast_Buff_Guidance_L1to3"
data "TargetSound" "Spell_Impact_Buff_Guidance_L1to3"
data "UseCosts" "KiPoint:2"
data "SpellAnimation" "03496c4a-49e0-4132-b585-3e5ecd1ad8e5(SPL_Arcane_Buff_01_Prepare),,;,,;8252328a-66dd-4dc0-bbe0-00eea3204922(SPL_Somatic_Circle_1HandCCW_01_Cast),,;982d842b-5d44-4ef6-ab33-14d5ae514a50(SPL_Somatic_Circle_1HandCCW_01_Recover),,;a9682ef9-5d9e-4ac0-8144-2c7fe6eb868c(SPL_Arcane_Buff_01_Loop),,;,,"
data "VerbalIntent" "Buff"
data "SpellStyleGroup" "Class"
data "SpellFlags" "IsMelee"
data "HitAnimationType" "MagicalNonDamage"
data "PrepareEffect" "78b419eb-8ada-47f4-904a-5f335971a331"
data "CastEffect" "5d7a0ad1-ac47-4f03-8c36-cce8184e1df0"
data "TargetEffect" "5eccabb5-4b4f-4d3a-87ed-69a2c27b7f18"

new entry "DRUNKLUCK"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Skill_Sorcerer_Passive_BendLuck"
data "Passives" "DrunkLuck"
data "Boosts" "IF(IsAttack() and HasDisadvantage()):Advantage(AttackRoll);IF(SkillCheck() and HasDisadvantage()):Advantage(AllSkills)"

new entry "DrunkLuck"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(context.HasContextFlag(StatsFunctorContext.OnAttacked) and (HasSavingThrowInSpellRoll() | HasSavingThrowInFunctorConditions()) and HasDisadvantage()):Advantage(AllSavingThrows);IF(context.HasContextFlag(StatsFunctorContext.OnAbilityCheck) and HasDisadvantage()):Advantage(AllAbilities)"








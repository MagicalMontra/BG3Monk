new entry "ImplementsOfMercy"
type "PassiveData"
data "DisplayName" "Implements of Mercy"
data "Description" "You gain proficiency in the Medicine and Insight skills and have advantage on medicine checks."
data "Icon" "Spell_Divination_Guidance"
data "Conditions" "SpellId('Target_Flurry_Strike')"
data "StatsFunctors" "ApplyStatus(SELF,HEALINGFLURRY,100,1)"
data "StatsFunctorContext" "OnAttack"

new entry "HandOfHealing"
type "PassiveData"
data "DisplayName" "Hand of Healing"
data "Description" "Your mystical touch can mend wounds. "
data "Icon" "Icon_HealingHands"
data "Boosts" "UnlockSpell(Target_HealingHands)"

// Original data "Boosts" "UnlockSpell(Target_HealingHands);IF(HasStatus('MARTS_DEX',context.Source)):UnlockSpell(Target_FlurryStrike,,,,Dexterity);IF(HasStatus('MARTS_STR',context.Source)):UnlockSpell(Target_FlurryStrike,,,,Strength)"//


new entry "Target_HealingFlurry"
type "SpellData"
data "SpellType" "Target"
data "SpellProperties" "RegainHitPoints(1d4+WisdomModifier);RemoveStatus(SELF,HEALINGFLURRY);RemoveStatus(SELF,FLURRYSTRIKE)"
data "TargetRadius" "1.5"
data "TargetConditions" "Character() and not Dead()"
data "Icon" "Icon_HealingHands"
data "Cooldown" "OncePerTurn"
data "DisplayName" "HealingFlurry"
data "Description" "Use your Hand of healing for free when you use flurry of blows and replace one of the strikes."
data "DescriptionParams" "RegainHitPoints(1d4+SpellCastingAbilityModifier)"
data "ExtraDescription" "Shared_Target_CureWounds_ExtraDescription"
data "TooltipDamageList" "RegainHitPoints(1d4+SpellCastingAbilityModifier)"
data "PreviewCursor" "Cast"
data "CastSelfAnimation" "bcc3b0d9-f04f-4448-aab0-e0ad641167cc(SPL_Somatic_Self_01_Cast)"
data "CastTextEvent" "Cast"
data "CastSound" "Spell_Cast_Healing_CureWounds_L1to3"
data "TargetSound" "Spell_Impact_Healing_CureWounds_L1to3"
data "CycleConditions" "Ally() and not Dead()"
data "UseCosts" ""
data "SpellAnimation" "414bbf02-2918-4f01-83fb-1ddc7a588d88(SPL_Arcane_Healing_01_Prepare),,;,,;e37d18b8-0de7-4bbc-a644-31ec2a91e548(SPL_Somatic_Touch_01_Cast),,;acfe8d41-20c1-4fe8-b158-f4b2be86e080(SPL_Somatic_Touch_01_Recover),,;0c5dcc83-fa78-41da-b6a5-440b5ea30936(SPL_Arcane_Healing_01_Loop),,;,,"
data "VerbalIntent" "Healing"
data "SpellFlags" "IsMelee"
data "HitAnimationType" "MagicalNonDamage"
data "PrepareEffect" "96a51ac8-2e7e-4718-bb62-dcfd18964a02"
data "CastEffect" "ce5a1256-d5c8-45b5-98fc-ee9a16e3673c"
data "TargetEffect" "d16a93f4-ddb5-4175-9b3f-22eced19ff02"

new entry "Target_FlurryStrike"
type "SpellData"
data "SpellType" "Target"
using "Target_UnarmedAttack"
data "TargetRadius" "1.5"
data "SpellProperties" "ApplyStatus(SELF,HEALINGFLURRY,100,1)
data "SpellRoll" "Attack(AttackType.MeleeSpellAttack)"
data "SpellSuccess" "IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(1d4+DexterityModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_DEX',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + DexterityModifier, Bludgeoning);IF(not CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(1d4+StrengthModifier,Bludgeoning);IF(CharacterLevelGreaterThan(4) and HasStatus('MARTS_STR',context.Source)):DealDamage(ResourceRoll(MartialArtsDie,1) + StrengthModifier, Bludgeoning)"
data "TargetConditions" "Enemy() and not Self() and not Dead()"
data "Icon" "Icon_AstralBonusStrike"
data "DisplayName" "Healing Flurry"
data "Description" "Replace one of your flurry of blows strikes with a use of healing hands."
data "DescriptionParams" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "TooltipDamageList" "DealDamage(1d4+MeleeWeaponAttackModifier, Bludgeoning)"
data "TooltipAttackSave" "MeleeSpellAttack"
data "PreviewCursor" "Melee"
data "CastTextEvent" "Cast"
data "CastSound" "Action_Cast_Bash"
data "TargetSound" "Action_Impact_Bash"
data "CycleConditions" "Character() and not Dead()"
data "UseCosts" "BonusActionPoint:1;KiPoint:1"
data "SpellFlags" "IsMelee;IsHarmful;IgnoreSilence"
data "HitAnimationType" "PhysicalDamage"
data "SpellAnimationIntentType" "Aggressive"

new entry "HEALINGFLURRY"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "Healing Furry"
data "Description" "Heal a character after using flurry of blows"
data "Icon" "Icon_HealingHands"
data "StackId" "HEALINGFLURRY"
data "Boosts" "UnlockSpell(Target_HealingFlurry)"

new entry "Target_HealingHands"
type "SpellData"
data "SpellType" "Target"
using "Target_CureWounds"
data "SpellProperties" "IF(CharacterLevelGreaterThan(5)):RemoveStatus(SG_Poisoned);IF(CharacterLevelGreaterThan(5)):RemoveStatus(SG_Disease);IF(CharacterLevelGreaterThan(5)):RemoveStatus(PARALYZED);IF(CharacterLevelGreaterThan(5)):RemoveStatus(DEAF);IF(CharacterLevelGreaterThan(5)):RemoveStatus(SG_Blinded);IF(CharacterLevelGreaterThan(5)):RemoveStatus(STUNNED)"
data "SpellSuccess" "IF(LevelLessThan(5)):RegainHitPoints(1d4+SpellCastingAbilityModifier);IF(CharacterLevelGreaterThan(4)):RegainHitPoints(ResourceRoll(MartialArtsDie,1) + SpellCastingAbilityModifier)"
data "TargetRadius" "1.5"
data "TargetConditions" "Character() and not Dead()"
data "Icon" "Spell_Evocation_CureWounds"
data "DisplayName" "Healing Hand"
data "Description" "Spend 1 Ki point and touch a creature to heal them of an amount equal to your martial arts die + wisdom modifier."
data "DescriptionParams" "RegainHitPoints(SpellCastingAbilityModifier)"
data "TooltipDamageList" "RegainHitPoints(SpellCastingAbilityModifier)"
data "PreviewCursor" "Cast"
data "CastSelfAnimation" "bcc3b0d9-f04f-4448-aab0-e0ad641167cc(SPL_Somatic_Self_01_Cast)"
data "CastTextEvent" "Cast"
data "CastSound" "Spell_Cast_Healing_CureWounds_L1to3"
data "TargetSound" "Spell_Impact_Healing_CureWounds_L1to3"
data "CycleConditions" "Ally() and not Dead()"
data "UseCosts" "ActionPoint:1;KiPoint:1"
data "SpellAnimation" "414bbf02-2918-4f01-83fb-1ddc7a588d88(SPL_Arcane_Healing_01_Prepare),,;,,;e37d18b8-0de7-4bbc-a644-31ec2a91e548(SPL_Somatic_Touch_01_Cast),,;acfe8d41-20c1-4fe8-b158-f4b2be86e080(SPL_Somatic_Touch_01_Recover),,;0c5dcc83-fa78-41da-b6a5-440b5ea30936(SPL_Arcane_Healing_01_Loop),,;,,"
data "VerbalIntent" "Healing"
data "SpellFlags" "IsMelee;IsASpell;IgnoreSilence;Invisible"
data "HitAnimationType" "MagicalNonDamage"
data "PrepareEffect" "96a51ac8-2e7e-4718-bb62-dcfd18964a02"
data "CastEffect" "ce5a1256-d5c8-45b5-98fc-ee9a16e3673c"
data "TargetEffect" "d16a93f4-ddb5-4175-9b3f-22eced19ff02"

new entry "HandOfHarm"
type "PassiveData"
data "DisplayName" "Hand Of Harm"
data "Description" "Manipulate your enemy's ki when you harness your own. Whenever you hit a creature with an unarmed strike you can deal additional damage equal to your martial arts die + your wisdom modifier by spending a ki point. You can only do this once per turn."
data "Icon" "Icon_HandOfHarm"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn;OncePerTurn"
data "Conditions" "(SpellId('Target_Flurry_Strike') or SpellId('Target_MartialArts') or SpellId('Target_MartialArts_BonusAttack')) and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('KiPoint', 1, 0, false, context.Source)"
data "StatsFunctors" "UseActionResource(SELF,KiPoint,1);IF(LevelLessThan(5)):DealDamage(1d4+WisdomModifier,Necrotic);IF(CharacterLevelGreaterThan(4)):DealDamage(ResourceRoll(MartialArtsDie,1) + WisdomModifier, Necrotic);IF(CharacterLevelGreaterThan(5)):ApplyStatus(POISONED,100,2)"
data "StatsFunctorContext" "OnAttack"

//Orginal//
//data "Conditions" "IsFlurry() and HasDamageEffectFlag(DamageFlags.Hit) and HasActionResource('KiPoint', 1, 0, false, context.Source)"//

new entry "PhysiciansTouch"
type "PassiveData"
data "Display Name" "Physician's Touch"
data "Description" "When you use Hand of Healing on a creature, you also end one disease or one of the following conditions affecting the creature: blinded, deafened, paralyzed, poisoned, or stunned. When you use Hand of Harm on a creature, you subject that creature to the poisoned condition until the end of your next turn.

FlurryOfHealing - 11th
You can now mete out a flurry of comfort and hurt. When you use Flurry of Blows, you can now replace each of the unarmed strikes with a use of your Hand of Healing, without spending ki points for the healing.

FlurryOfHarm - 11th
In addition, when you make an unarmed strike with Flurry of Blows, you can use Hand of Harm with that strike without spending the ki point for Hand of Harm. You can still use Hand of Harm only once per turn.